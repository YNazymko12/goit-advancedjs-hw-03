{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_seZlfq3ns3OG4awqKpgrHguF1bsT8zG0vEkOs8p5QCXaskGFToJj4a6Hy3j72iT7';\n\nexport async function fetchBreeds() {\n  return await axios\n    .get('https://api.thecatapi.com/v1/breeds')\n    .then(resp => resp.data);\n}\n\nexport async function fetchCatByBreed(breedId) {\n  return await axios\n    .get(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n    .then(resp => resp.data);\n}\n\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchBreeds, fetchCatByBreed } from './js/cat-api.js';\n\nconst elements = {\n  loader: document.querySelector('.loader'),\n  select: document.querySelector('.breed-select'),\n  catInfoBox: document.querySelector('.cat-info'),\n};\n\nlet isFirstSelect = true;\nlet slimSelect;\n\n// elements.loader.classList.remove('is-hidden');\n// elements.select.styles.display = 'none';\n// elements.select.classList.add('is-hidden');\n// elements.slimInput.classList.add('is-hidden');\n\nelements.select.addEventListener('change', handleBreedSelection);\n\nconst errorMessage = {\n  title: 'Error',\n  message: '❌ Oops! Something went wrong! Try reloading the page!',\n  position: 'topCenter',\n  color: 'red',\n};\n\nfetchBreeds()\n  .then(breeds => {\n    if (!breeds) {\n      elements.loader.classList.add('is-hidden');\n      elements.select.classList.add('is-hidden');\n      throw new Error();\n    }\n    const data = breeds.map(({ id, name }) => ({ text: name, value: id }));\n\n    slimSelect = new SlimSelect({\n      select: '#single',\n      settings: {\n        placeholderText: 'Search breeds',\n        onChange: info => {\n          handleSlimSelectChange(info);\n        },\n      },\n    });\n\n    slimSelect.setData([{ placeholder: true, text: '' }, ...data]);\n\n    elements.loader.classList.add('is-hidden');\n    elements.select.classList.remove('is-hidden');\n  })\n  .catch(error => {\n    console.log(error.message);\n    elements.loader.classList.add('is-hidden');\n    elements.select.classList.add('is-hidden');\n    iziToast.show(errorMessage);\n  });\n\nfunction handleBreedSelection(event) {\n  event.preventDefault();\n\n  elements.loader.classList.remove('is-hidden');\n  elements.catInfoBox.innerHTML = '';\n\n  if (isFirstSelect) {\n    isFirstSelect = false;\n    return;\n  }\n\n  const { value } = event.currentTarget;\n\n  fetchCatByBreed(value)\n    .then(data => {\n      if (!data) {\n        elements.loader.classList.add('is-hidden');\n        throw new Error();\n      }\n      elements.catInfoBox.insertAdjacentHTML(\n        'beforeend',\n        createBreedCardMarkup(data)\n      );\n      elements.catInfoBox.classList.remove('is-hidden');\n      elements.loader.classList.add('is-hidden');\n    })\n    .catch(error => {\n      console.log(error.message);\n      elements.loader.classList.add('is-hidden');\n      iziToast.show(errorMessage);\n    });\n}\n\nfunction createBreedCardMarkup(data) {\n  const { url } = data[0];\n  const { description, name, temperament } = data[0].breeds[0];\n\n  const markup = `<img src=\"${url}\" alt=\"${name} cat\" width=\"400\" height=\"auto\"/><div class=\"breed-text-info\"><h1>${name}</h1><p class=\"description\">${description}</p><p><strong>Temperament:</strong> ${temperament}</p></div>`;\n  return markup;\n}\n\nfunction handleSlimSelectChange(info) {\n  const selectedValue = info.value();\n\n  const selectedElement = slimSelect.data.data.find(\n    item => item.value === selectedValue\n  );\n\n  if (selectedElement) {\n    const selectedDOMElement = selectedElement.element;\n\n    selectedDOMElement.classList.add('is-hidden');\n  }\n}\n"],"names":["axios","fetchBreeds","resp","fetchCatByBreed","breedId","elements","isFirstSelect","slimSelect","handleBreedSelection","errorMessage","breeds","data","id","name","SlimSelect","info","handleSlimSelectChange","error","iziToast","event","value","createBreedCardMarkup","url","description","temperament","selectedValue","selectedElement","item"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEK,eAAeC,GAAc,CAClC,OAAO,MAAMD,EACV,IAAI,qCAAqC,EACzC,KAAKE,GAAQA,EAAK,IAAI,CAC3B,CAEO,eAAeC,EAAgBC,EAAS,CAC7C,OAAO,MAAMJ,EACV,IAAI,wDAAwDI,GAAS,EACrE,KAAKF,GAAQA,EAAK,IAAI,CAC3B,CCVA,MAAMG,EAAW,CACf,OAAQ,SAAS,cAAc,SAAS,EACxC,OAAQ,SAAS,cAAc,eAAe,EAC9C,WAAY,SAAS,cAAc,WAAW,CAChD,EAEA,IAAIC,EAAgB,GAChBC,EAOJF,EAAS,OAAO,iBAAiB,SAAUG,CAAoB,EAE/D,MAAMC,EAAe,CACnB,MAAO,QACP,QAAS,wDACT,SAAU,YACV,MAAO,KACT,EAEAR,EAAa,EACV,KAAKS,GAAU,CACd,GAAI,CAACA,EACH,MAAAL,EAAS,OAAO,UAAU,IAAI,WAAW,EACzCA,EAAS,OAAO,UAAU,IAAI,WAAW,EACnC,IAAI,MAEZ,MAAMM,EAAOD,EAAO,IAAI,CAAC,CAAE,GAAAE,EAAI,KAAAC,MAAY,CAAE,KAAMA,EAAM,MAAOD,CAAE,EAAG,EAErEL,EAAa,IAAIO,EAAW,CAC1B,OAAQ,UACR,SAAU,CACR,gBAAiB,gBACjB,SAAUC,GAAQ,CAChBC,EAAuBD,CAAI,CAC5B,CACF,CACP,CAAK,EAEDR,EAAW,QAAQ,CAAC,CAAE,YAAa,GAAM,KAAM,EAAI,EAAE,GAAGI,CAAI,CAAC,EAE7DN,EAAS,OAAO,UAAU,IAAI,WAAW,EACzCA,EAAS,OAAO,UAAU,OAAO,WAAW,CAChD,CAAG,EACA,MAAMY,GAAS,CACd,QAAQ,IAAIA,EAAM,OAAO,EACzBZ,EAAS,OAAO,UAAU,IAAI,WAAW,EACzCA,EAAS,OAAO,UAAU,IAAI,WAAW,EACzCa,EAAS,KAAKT,CAAY,CAC9B,CAAG,EAEH,SAASD,EAAqBW,EAAO,CAMnC,GALAA,EAAM,eAAc,EAEpBd,EAAS,OAAO,UAAU,OAAO,WAAW,EAC5CA,EAAS,WAAW,UAAY,GAE5BC,EAAe,CACjBA,EAAgB,GAChB,MACD,CAED,KAAM,CAAE,MAAAc,CAAK,EAAKD,EAAM,cAExBhB,EAAgBiB,CAAK,EAClB,KAAKT,GAAQ,CACZ,GAAI,CAACA,EACH,MAAAN,EAAS,OAAO,UAAU,IAAI,WAAW,EACnC,IAAI,MAEZA,EAAS,WAAW,mBAClB,YACAgB,EAAsBV,CAAI,CAClC,EACMN,EAAS,WAAW,UAAU,OAAO,WAAW,EAChDA,EAAS,OAAO,UAAU,IAAI,WAAW,CAC/C,CAAK,EACA,MAAMY,GAAS,CACd,QAAQ,IAAIA,EAAM,OAAO,EACzBZ,EAAS,OAAO,UAAU,IAAI,WAAW,EACzCa,EAAS,KAAKT,CAAY,CAChC,CAAK,CACL,CAEA,SAASY,EAAsBV,EAAM,CACnC,KAAM,CAAE,IAAAW,CAAG,EAAKX,EAAK,GACf,CAAE,YAAAY,EAAa,KAAAV,EAAM,YAAAW,CAAa,EAAGb,EAAK,GAAG,OAAO,GAG1D,MADe,aAAaW,WAAaT,sEAAyEA,gCAAmCU,yCAAmDC,aAE1M,CAEA,SAASR,EAAuBD,EAAM,CACpC,MAAMU,EAAgBV,EAAK,QAErBW,EAAkBnB,EAAW,KAAK,KAAK,KAC3CoB,GAAQA,EAAK,QAAUF,CAC3B,EAEMC,GACyBA,EAAgB,QAExB,UAAU,IAAI,WAAW,CAEhD"}