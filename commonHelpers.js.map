{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_seZlfq3ns3OG4awqKpgrHguF1bsT8zG0vEkOs8p5QCXaskGFToJj4a6Hy3j72iT7';\n\nexport async function fetchBreeds() {\n  return await axios\n    .get('https://api.thecatapi.com/v1/breeds')\n    .then(resp => resp.data);\n}\n\nexport async function fetchCatByBreed(breedId) {\n  return await axios\n    .get(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n    .then(resp => resp.data);\n}\n\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchBreeds, fetchCatByBreed } from './js/cat-api.js';\n\nconst elements = {\n  loader: document.querySelector('.loader'),\n  select: document.querySelector('.breed-select'),\n  catInfoBox: document.querySelector('.cat-info'),\n};\n\nlet isFirstSelect = true;\n\nelements.select.style.display = 'none';\n\nelements.select.addEventListener('change', handleBreedSelection);\n\nconst slimSelect = new SlimSelect({\n  select: '#single',\n  settings: {\n    placeholderText: 'Search breeds',\n  },\n});\n\nconst errorMessage = {\n  title: 'Error',\n  message: '❌ Oops! Something went wrong! Try reloading the page!',\n  position: 'topCenter',\n  color: 'red',\n};\n\nfetchBreeds()\n  .then(breeds => {\n    if (!breeds) {\n      elements.loader.style.display = 'none';\n      throw new Error();\n    }\n    const data = breeds.map(({ id, name }) => ({ text: name, value: id }));\n    slimSelect.setData([{ placeholder: true, text: '' }, ...data]);\n\n    elements.loader.style.display = 'none';\n    elements.select.style.display = 'block';\n  })\n  .catch(error => {\n    console.log(error.message);\n    elements.loader.style.display = 'none';\n    elements.select.style.display = 'none';\n    iziToast.show(errorMessage);\n  });\n\nfunction handleBreedSelection(event) {\n  event.preventDefault();\n\n  elements.loader.style.display = 'block';\n  elements.catInfoBox.innerHTML = '';\n\n  if (isFirstSelect) {\n    isFirstSelect = false;\n    return;\n  }\n\n  const { value } = event.currentTarget;\n\n  fetchCatByBreed(value)\n    .then(data => {\n      if (!data) {\n        elements.loader.style.display = 'none';\n        throw new Error();\n      }\n      elements.catInfoBox.insertAdjacentHTML(\n        'beforeend',\n        createBreedCardMarkup(data)\n      );\n\n      elements.loader.style.display = 'none';\n    })\n    .catch(error => {\n      console.log(error.message);\n      elements.loader.style.display = 'none';\n      iziToast.show(errorMessage);\n    });\n}\n\nfunction createBreedCardMarkup(data) {\n  const { url } = data[0];\n  const { description, name, temperament } = data[0].breeds[0];\n\n  const markup = `<img src=\"${url}\" alt=\"${name} cat\" width=\"400\" height=\"auto\"/><div class=\"breed-text-info\"><h1>${name}</h1><p class=\"description\">${description}</p><p><strong>Temperament:</strong> ${temperament}</p></div>`;\n  return markup;\n}\n"],"names":["axios","fetchBreeds","resp","fetchCatByBreed","breedId","elements","isFirstSelect","handleBreedSelection","slimSelect","SlimSelect","errorMessage","breeds","data","id","name","error","iziToast","event","value","createBreedCardMarkup","url","description","temperament"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEK,eAAeC,GAAc,CAClC,OAAO,MAAMD,EACV,IAAI,qCAAqC,EACzC,KAAKE,GAAQA,EAAK,IAAI,CAC3B,CAEO,eAAeC,EAAgBC,EAAS,CAC7C,OAAO,MAAMJ,EACV,IAAI,wDAAwDI,GAAS,EACrE,KAAKF,GAAQA,EAAK,IAAI,CAC3B,CCVA,MAAMG,EAAW,CACf,OAAQ,SAAS,cAAc,SAAS,EACxC,OAAQ,SAAS,cAAc,eAAe,EAC9C,WAAY,SAAS,cAAc,WAAW,CAChD,EAEA,IAAIC,EAAgB,GAEpBD,EAAS,OAAO,MAAM,QAAU,OAEhCA,EAAS,OAAO,iBAAiB,SAAUE,CAAoB,EAE/D,MAAMC,EAAa,IAAIC,EAAW,CAChC,OAAQ,UACR,SAAU,CACR,gBAAiB,eAClB,CACH,CAAC,EAEKC,EAAe,CACnB,MAAO,QACP,QAAS,wDACT,SAAU,YACV,MAAO,KACT,EAEAT,EAAa,EACV,KAAKU,GAAU,CACd,GAAI,CAACA,EACH,MAAAN,EAAS,OAAO,MAAM,QAAU,OAC1B,IAAI,MAEZ,MAAMO,EAAOD,EAAO,IAAI,CAAC,CAAE,GAAAE,EAAI,KAAAC,MAAY,CAAE,KAAMA,EAAM,MAAOD,CAAE,EAAG,EACrEL,EAAW,QAAQ,CAAC,CAAE,YAAa,GAAM,KAAM,EAAI,EAAE,GAAGI,CAAI,CAAC,EAE7DP,EAAS,OAAO,MAAM,QAAU,OAChCA,EAAS,OAAO,MAAM,QAAU,OACpC,CAAG,EACA,MAAMU,GAAS,CACd,QAAQ,IAAIA,EAAM,OAAO,EACzBV,EAAS,OAAO,MAAM,QAAU,OAChCA,EAAS,OAAO,MAAM,QAAU,OAChCW,EAAS,KAAKN,CAAY,CAC9B,CAAG,EAEH,SAASH,EAAqBU,EAAO,CAMnC,GALAA,EAAM,eAAc,EAEpBZ,EAAS,OAAO,MAAM,QAAU,QAChCA,EAAS,WAAW,UAAY,GAE5BC,EAAe,CACjBA,EAAgB,GAChB,MACD,CAED,KAAM,CAAE,MAAAY,CAAK,EAAKD,EAAM,cAExBd,EAAgBe,CAAK,EAClB,KAAKN,GAAQ,CACZ,GAAI,CAACA,EACH,MAAAP,EAAS,OAAO,MAAM,QAAU,OAC1B,IAAI,MAEZA,EAAS,WAAW,mBAClB,YACAc,EAAsBP,CAAI,CAClC,EAEMP,EAAS,OAAO,MAAM,QAAU,MACtC,CAAK,EACA,MAAMU,GAAS,CACd,QAAQ,IAAIA,EAAM,OAAO,EACzBV,EAAS,OAAO,MAAM,QAAU,OAChCW,EAAS,KAAKN,CAAY,CAChC,CAAK,CACL,CAEA,SAASS,EAAsBP,EAAM,CACnC,KAAM,CAAE,IAAAQ,CAAG,EAAKR,EAAK,GACf,CAAE,YAAAS,EAAa,KAAAP,EAAM,YAAAQ,CAAa,EAAGV,EAAK,GAAG,OAAO,GAG1D,MADe,aAAaQ,WAAaN,sEAAyEA,gCAAmCO,yCAAmDC,aAE1M"}